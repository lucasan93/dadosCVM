---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# dadosCVM

<!-- badges: start -->
<!-- badges: end -->

The goal of dadosCVM is to obtain data of investments funds registered on Comissão de Valores Imobiliários (_Security and Exchange Commissions from Brazil_). Data is collected from files available at http://dados.cvm.gov.br/dados/. 

Main goals/ideas are descripted below:

  - Download of latest Registration Data ('Dados Cadastrais') available on CVM - 100%;
  - Quick access to Registration Data ('Dados Cadastrais'), which will be updated on a monthly basis and will provide a quicker access to the database - 0%;
  - Develop a function that simplifies funds names (i.e. transforms 'FUNDO DE INVESTIMENTO EM DIREITOS CREDITORIOS' to 'FIDC') - 0%.


## Installation

You can install the development version of dadosCVM from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("lucasan93/dadosCVM")
```

## Example 1: Downloading the latest registration data from CVM:

The function _cad_fi()_ downloads the latest registration data available on CVM.

```{r example, warning=FALSE, message=FALSE}
library(dadosCVM)
library(dplyr)
library(kableExtra)
```

Below the top-10 funds in operation are extracted, sorted by their equity and identified by their CNPJ (Brazil National Registry of Legal Entities number).

```{r cadfi, warning=FALSE, message=FALSE}
dados_cadastrais <- cad_fi() %>%
                      filter(situacao == 'EM FUNCIONAMENTO NORMAL') %>% 
                      select(cnpj,
                             classe,
                             tipo,
                             inicio_atv,
                             pl_data,
                             pl) %>% 
                      arrange(desc(pl)) %>% 
                      slice_head(n = 10) %>% 
                      mutate(pl = format(pl,
                                         big.mark = ','))

kable(dados_cadastrais)
```

